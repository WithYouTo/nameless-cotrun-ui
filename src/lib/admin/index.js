layui.extend({setter:"config",admin:"lib/admin",view:"lib/view"}).define(["setter","admin"],function(e){var l=layui.setter,o=layui.element,r=layui.admin,u=r.tabsPage,c=layui.view,s=function(){var n=layui.router(),e=n.path,t=r.correctRouter(n.path.join("/"));e.length||(e=[""]),""==e.toString()&&(e=layui.whconfig.page.main.index.split("/")),""===e[e.length-1]&&(e[e.length-1]=l.entry);var a=function(e){s.haveInit&&h(".layui-layer").each(function(){var e=h(this),a=e.attr("times");e.hasClass("layui-layim")||layer.close(a)}),s.haveInit=!0,h(d).scrollTop(0),delete u.type};if("tab"===u.type&&("/"!==t||"/"===t&&r.tabsBody().html()))return r.tabsBodyChange(u.index),a(u.type);c().render(e.join("/")).then(function(e){var a,i=h("#LAY_app_tabsheader>li");i.each(function(e){h(this).attr("lay-id")===t&&(a=!0,u.index=e)}),l.pageTabs&&"/"!==t&&(a||(h(d).append('<div class="layadmin-tabsbody-item layui-show"></div>'),u.index=i.length,o.tabAdd(y,{title:"<span>"+(e.title||"新标签页")+"</span>",id:t,attr:n.href}))),this.container=r.tabsBody(u.index),l.pageTabs||this.container.scrollTop(0),o.tabChange(y,t),r.tabsBodyChange(u.index)}).done(function(){layui.use("common",layui.cache.callback.common),i.on("resize",layui.data.resize),o.render("breadcrumb","breadcrumb"),r.tabsBody(u.index).on("scroll",function(){var e=h(this),a=h(".layui-laydate"),i=h(".layui-layer")[0];a[0]&&(a.each(function(){var e=h(this);e.hasClass("layui-laydate-static")||e.remove()}),e.find("input").blur()),i&&layer.closeAll("tips")})}),a()},a=function(e){var i,a=layui.router(),n=c(l.container),t=r.correctRouter(a.path.join("/"));if(layui.each(l.indPage,function(e,a){if(t===a)return i=!0}),layui.config({base:l.base+"controller/"}),i||t===layui.whconfig.page.login.login)n.render(a.path.join("/")).done(function(){r.pageType="alone"});else{if(l.interceptor)if(!layui.data(l.tableName)[l.request.tokenName])return location.hash=layui.whconfig.page.login.login+"/redirect="+encodeURIComponent(t);"console"===r.pageType?s():n.render(layui.whconfig.page.main.layout).done(function(){s(),layui.element.render(),r.screen()<2&&r.sideFlexible(),r.pageType="console"})}},d="#LAY_app_body",y="layadmin-layout-tabs",h=layui.$,i=h(window);layui.link(l.base+"style/admin.css?v="+r.v+"-1",function(){a()},"layuiAdmin"),window.onhashchange=function(){a(),layui.event.call(this,l.MOD_NAME,"hash({*})",layui.router())},layui.each(l.extend,function(e,a){var i={};i[a]="{/}"+l.base+"lib/extend/"+a,layui.extend(i)}),e("index",{render:s})});